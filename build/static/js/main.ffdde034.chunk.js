(this["webpackJsonppangping-bot"]=this["webpackJsonppangping-bot"]||[]).push([[0],{177:function(e,n,t){e.exports=t(396)},182:function(e,n,t){},194:function(e,n){},196:function(e,n){},228:function(e,n){},229:function(e,n){},396:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(12),o=t.n(c),i=(t(182),t(34)),l=t(163),u=t(21),s=t(86),h=t(164),d=t(165),p=t.n(d),f=t(176),g="SET_TOKEN",m={accessToken:null,refreshToken:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g:return Object(f.a)({},e,{},n.payload);default:return e}},v=Object(u.c)({auth:b}),E={key:"root",storage:p.a},w=Object(s.a)(E,v),k=t(175),O=t(6),j=t(80),y=(t(189),t(171)),x=t.n(y),T=t(57),_=t(58),S=t(166),I=t.n(S),B=t(167),C="701046332835758101",J="i7PzKIwZGF1TH6XhpJ2wWkCBx4X53w5g",W="http://localhost:5000/validate";function z(){var e=Object(T.a)(["\n  text-align: center;\n"]);return z=function(){return e},e}function K(){var e=Object(T.a)(["\n  background: white;\n  align-self: center;\n  min-width: 500px;\n  min-height: 300px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 8px;\n  padding: 8px;\n"]);return K=function(){return e},e}function U(){var e=Object(T.a)(["\n  background: rgb(44, 62, 80);\n  background: linear-gradient(180deg, rgba(44, 62, 80, 1) 0%, rgba(253, 116, 108, 1) 100%);\n  width: 100vw;\n  min-height: 100vh;\n"]);return U=function(){return e},e}var X=new(t.n(B).a)({clientId:C,clientSecret:J,redirectUri:W}),A=_.a.div(U()),D=_.a.div(K()),F=_.a.h1(z()),G=function(){return Object(a.useEffect)((function(){}),[]),r.a.createElement(A,null,r.a.createElement(D,null,r.a.createElement(F,null,"Sign-In"),r.a.createElement(x.a,{onClick:function(){var e=X.generateAuthUrl({scope:["identify"],state:I.a.randomBytes(16).toString("hex")});window.open(e,"_self")},type:"primary"},"Sign-In with Discord")))},H=t(82),M=t.n(H),N=t(173),P=t(83),Z=t.n(P),$=t(174),q=t.n($),L={setToken:function(e,n){return{type:g,payload:{accessToken:e,refreshToken:n}}}},Q=Object(i.b)((function(e){return{auth:e.auth}}),L)((function(e){var n=Object(O.h)(),t=Object(O.g)();Object(a.useEffect)((function(){c()}),[]);var c=function(){var a=Object(N.a)(M.a.mark((function a(){var r,c;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Z.a.parse(n.search),a.prev=1,a.next=4,q.a.post("https://discord.com/api/oauth2/token",Z.a.stringify({client_id:C,client_secret:J,redirect_uri:W,scope:"identify",grant_type:"authorization_code",code:r.code}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:c=a.sent,console.log("props :>> ",e),200===c.status?(e.setToken(c.data.access_token,c.data.refresh_token),t.push("/")):t.push("/login"),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),console.log("err :>> ",a.t0),t.push("/login");case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h1",null,"validating"))})),R=Object(i.b)((function(e){return{auth:e.auth}}),{})((function(e){console.log("props :>> ",e);var n=function(n){var t=n.children,a=Object(k.a)(n,["children"]);return r.a.createElement(O.b,Object.assign({},a,{render:function(n){var a=n.location;return e.auth.accessToken?t:r.a.createElement(O.a,{to:{pathname:"/login",state:{from:a}}})}}))};return r.a.createElement(j.a,null,r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/login"},r.a.createElement(G,null)),r.a.createElement(O.b,{path:"/validate"},r.a.createElement(Q,null)),r.a.createElement(n,null,r.a.createElement(O.b,{exact:!0,path:"/"},r.a.createElement("div",null,r.a.createElement("h1",null,"login here"))))))})),V=(t(394),function(){var e=Object(u.d)(w,Object(u.a)(h.a));return{store:e,persistor:Object(s.b)(e)}}()),Y=V.store,ee=V.persistor,ne=function(){return r.a.createElement(i.a,{store:Y},r.a.createElement(l.a,{loading:null,persistor:ee},r.a.createElement(R,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[177,1,2]]]);
//# sourceMappingURL=main.ffdde034.chunk.js.map